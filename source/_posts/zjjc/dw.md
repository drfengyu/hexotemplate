---
title: 中级教程——3.对位
categories:
  - 汇川视觉
  - 中级教程
tags:
  - 汇川视觉
  - 中级教程
cover: image.png
comments: true
toc: true
donate: true
share: true
date: 2024-09-19 16:39:24
---

# 学习内容

对位基础讲解
1. 手眼标定
2. 坐标转换
3. 对位计算

# 应用说明

## 对位基础-对位概念

![alt text](image.png)

## 对位基础-手眼标定概念

![alt text](image-1.png)

## 手眼标定——框架简介

![alt text](image-2.png)

## 手眼标定——详细介绍

![alt text](image-3.png)

## 坐标转换——框架简介

![alt text](image-4.png)

## 坐标转换——详细介绍

功能：	将图像坐标转换为其他坐标系下的坐标，通常配合手眼标定的输出结果（单应性矩阵）转换成机械坐标，联合标定的输出结果转换矩阵转换成标定板坐标。

| 坐标转换参数     | 参数含义                                                                                       |
|------------------|------------------------------------------------------------------------------------------------|
| 输入图像         | 将转换的点或者直线绘制到输入图像上，通过视觉窗口的输出图像可以查看绘制后的图像。         |
| 标定模式         | 目前支持手眼标定、J4轴标定、联合标定和关联标定四种模式。                                   |
| 标定结果         | 绑定上述四种模式标定的输出结果，`CalibrationResult` 类型。                               |
| J4轴输入参数     | 当模式选择 J4轴标定时需要输入拍照位和机器人当前位置。                                     |
| 关联标定设置     | 关联标定设置，选择对位或者测量，对位则会生成机械坐标，测量生成图像坐标。                  |
| 相机序号         | 选择需要转换的联合标定的相机序号。                                                           |
| 点输入/直线输入  | 和输入方式有关，输入方式选择点则输入点，选择直线则输入直线。最多支持 8 组直线或者点。     |

## 对位计算——框架简介

![alt text](image-5.png)

## 对位计算——详细介绍

功能：在平面对位计算中，需要至少两个点可以计算出对位结果（对位偏移值）首先会根据直线角度或者线段坐标（取决于旋转计算方式）计算旋转角度（偏移角度θ），旋转后根据对象旋转后的平移点计算平移量（偏移值X，Y），节点的输出结果在结果输出中引用。

| 对位计算参数              | 参数含义                                                                                       |
|---------------------------|------------------------------------------------------------------------------------------------|
| 旋转计算方式              | 可以选择通过角度或者线段来计算，不同的计算方式，对下方的旋转角度输入会产生影响。            |
| 旋转中心X                | 输入旋转中心X坐标。                                                                          |
| 旋转中心Y                | 输入旋转中心Y坐标。                                                                          |
| 平移点输入                | 平移点输入方式，可以选择按点（Point）或者按坐标的方式（X，Y），不同的输入方式对下方的平移坐标输入产生影响。 |
| X，Y，角度补偿设置       | 在机构的X、Y和θ三个方向对计算出的偏移值进行补偿。                                           |
| 旋转坐标输入              | 输入内容和旋转计算方式相关联，如果选择角度，则输入对象和目标线段的角度；如果选择线段，则输入对象和目标线段起始和终止点的坐标。 |
| 平移坐标输入              | 输入内容和平移点输入方式相关联，如果输入点，则以Point的方式输入对象目标点对，如果选择坐标，则以X、Y方式输入对象目标点对。平移偏移量计算至少需要1个点，最多支持4个点，多个点计算方式为取点集中心。 |
| 补偿模式                  | 可以切换常规补偿和模板补偿，具体看右图说明。                                                |

![alt text](image-6.png)

# 课后练习

使用宝马标这套图片实现教学案例中的功能（使用循环工具实现手眼标定流程）


